{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Gare = function (_React$Component) {\n  _inherits(Gare, _React$Component);\n\n  var _super = _createSuper(Gare);\n\n  function Gare(props) {\n    var _this;\n\n    _classCallCheck(this, Gare);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      query: ''\n    };\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Gare, [{\n    key: \"onChangeText\",\n    value: function onChangeText(e) {\n      this.setState({\n        query: e\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsx(SafeAreaView, {\n        style: styles.container,\n        children: _jsxs(View, {\n          children: [_jsx(Text, {\n            style: styles.title,\n            children: \"Bienvenue !\"\n          }), _jsx(View, {\n            style: styles.form,\n            children: _jsx(TextInput, {\n              style: styles.input,\n              onChangeText: this.onChangeText,\n              value: this.state.query,\n              placeholder: \"Rechercher une gare\",\n              placeholderTextColor: \"#ccc\"\n            })\n          }), _jsx(Text, {\n            children: this.state.query\n          })]\n        })\n      });\n    }\n  }]);\n\n  return Gare;\n}(React.Component);\n\nvar Search = function (_React$Component2) {\n  _inherits(Search, _React$Component2);\n\n  var _super2 = _createSuper(Search);\n\n  function Search(props) {\n    var _this2;\n\n    _classCallCheck(this, Search);\n\n    _this2 = _super2.call(this, props);\n    _this2.state = {\n      show: false,\n      load: false,\n      query: '',\n      curent: 0,\n      type: 0,\n      opt: 'SNCF/departure',\n      stops: []\n    };\n\n    _this2.getStops('');\n\n    _this2.handleChange = _this2.handleChange.bind(_assertThisInitialized(_this2));\n    _this2.handleKey = _this2.handleKey.bind(_assertThisInitialized(_this2));\n    _this2.handleOpt = _this2.handleOpt.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.searchInput.focus();\n      if (typeof this.props.opt !== 'undefined') this.setState({\n        opt: this.props.opt\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        query: event.target.value,\n        curent: 0\n      });\n      this.getStops(event.target.value);\n    }\n  }, {\n    key: \"handleKey\",\n    value: function handleKey(event) {\n      if (event.keyCode == 40 && this.state.curent < this.state.len) {\n        this.setState({\n          curent: this.state.curent + 1\n        });\n        event.preventDefault();\n      } else if (event.keyCode == 38 && this.state.curent != 0) {\n        this.setState({\n          curent: this.state.curent - 1\n        });\n        event.preventDefault();\n      } else if (event.keyCode == 13) {\n        var url;\n        if (window.location.href.indexOf('mylines.fr/embed') >= 0) url = '/embed/' + this.state.opt + '/' + this.state.stops[this.state.curent].stop_point.uic_code + '/' + this.props.auth + '?gui';else url = '/' + this.state.opt + '/' + this.state.stops[this.state.curent].stop_point.uic_code + '?gui';\n        window.location = url;\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"handleOpt\",\n    value: function handleOpt(event) {\n      this.setState({\n        opt: event.target.value\n      });\n    }\n  }, {\n    key: \"getStops\",\n    value: function getStops(query) {\n      var _this3 = this;\n\n      this.setState({\n        load: true\n      });\n      var url;\n      if (window.location.href.indexOf('mylines.fr/embed') >= 0) url = 'https://api.mylines.fr/te/search?auth=' + this.props.auth + '&q=' + query;else url = 'https://api.mylines.fr/sncf/search?q=' + query;\n      fetch(url, {\n        method: 'get'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this3.setState({\n          stops: data.stop_points,\n          len: data.stop_points.length - 1,\n          load: false\n        });\n      }).catch(function (err) {\n        _this3.setState({\n          load: false\n        });\n      });\n    }\n  }, {\n    key: \"opt\",\n    value: function opt(a, b) {\n      if (a == b) return true;\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var opt = this.props.opt;\n      return _jsxs(_Fragment, {\n        children: [_jsxs(\"div\", {\n          className: \"gui\",\n          children: [this.props.displayForce == false ? _jsx(\"div\", {\n            onClick: this.props.show,\n            className: \"close\",\n            children: \"Fermer\"\n          }) : _jsx(_Fragment, {}), _jsx(\"br\", {}), _jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Rechercher une autre gare\",\n            ref: function ref(inputEl) {\n              return _this4.searchInput = inputEl;\n            },\n            onChange: this.handleChange,\n            onKeyDown: this.handleKey,\n            autocomplete: \"off\"\n          }), this.state.load ? _jsxs(\"div\", {\n            children: [\" \", _jsx(\"div\", {\n              className: \"progress-bck\"\n            }), \" \", _jsx(\"div\", {\n              className: \"progress indeterminate\"\n            })]\n          }) : _jsx(_Fragment, {}), _jsx(\"br\", {}), _jsxs(\"div\", {\n            className: \"stopList\",\n            children: [this.state.stops.map(function (stop, i) {\n              return _jsx(GuiStop, {\n                stop: stop,\n                onover: i == _this4.state.curent ? true : false,\n                auth: _this4.props.auth,\n                opt: _this4.state.opt,\n                show: _this4.props.show\n              }, i);\n            }), this.state.stops.length == 0 ? _jsx(\"div\", {\n              className: \"center\",\n              children: \"Aucun r\\xE9sultat\"\n            }) : _jsx(_Fragment, {}), _jsxs(\"div\", {\n              className: \"about\",\n              children: [_jsx(\"br\", {}), _jsx(\"div\", {\n                className: \"hr\"\n              }), _jsx(\"br\", {}), _jsx(\"img\", {\n                src: logo,\n                className: \"logo\",\n                alt: \"Logo MyLines Embed\"\n              }), _jsx(\"br\", {}), _jsxs(\"span\", {\n                children: [\"MyLines 2021 - \", new Date().getFullYear(), \" \\u2022 Version 1.3.1 \\u2022 \", window.location.href.indexOf('mylines.fr/embed') >= 0 ? _jsx(_Fragment, {\n                  children: \" Train-Empire\"\n                }) : _jsx(_Fragment, {\n                  children: \" SNCF\"\n                }), _jsx(\"br\", {}), \"Made with \\uD83D\\uDC96\"]\n              }), _jsx(\"br\", {}), _jsxs(\"a\", {\n                href: \"https://github.com/MaisClement/MyLinesEmbed\",\n                className: \"mini_fluent_btn\",\n                children: [\" \", _jsx(\"img\", {\n                  src: github,\n                  alt: \"github\"\n                }), \" \"]\n              }), _jsxs(\"a\", {\n                href: \"http://discord.mylines.fr\",\n                className: \"mini_fluent_btn\",\n                children: [\" \", _jsx(\"img\", {\n                  src: discord,\n                  alt: \"discord\"\n                }), \" \"]\n              }), _jsxs(\"a\", {\n                href: \"mailto:admin@mylines.fr\",\n                className: \"mini_fluent_btn\",\n                children: [\" \", _jsx(\"img\", {\n                  src: mail,\n                  alt: \"mail\"\n                }), \" \"]\n              })]\n            })]\n          })]\n        }), _jsxs(\"div\", {\n          className: \"gui-menu\",\n          children: [_jsx(\"div\", {\n            className: \"hr\"\n          }), _jsx(\"h3\", {\n            children: \"Style d'affichage\"\n          }), _jsxs(\"div\", {\n            className: \"cc-selector\",\n            children: [_jsx(\"input\", {\n              type: \"radio\",\n              defaultChecked: this.opt(opt, 'SNCF/departure'),\n              id: \"SNCFd\",\n              name: \"select\",\n              value: \"SNCF/departure\",\n              onClick: this.handleOpt\n            }), _jsx(\"label\", {\n              className: \"selectcard-cc SNCFd-card\",\n              for: \"SNCFd\"\n            }), _jsx(\"input\", {\n              type: \"radio\",\n              defaultChecked: this.opt(opt, 'SNCF/arrival'),\n              id: \"SNCFa\",\n              name: \"select\",\n              value: \"SNCF/arrival\",\n              onClick: this.handleOpt\n            }), _jsx(\"label\", {\n              className: \"selectcard-cc SNCFa-card\",\n              for: \"SNCFa\"\n            }), _jsx(\"br\", {}), _jsx(\"br\", {}), _jsx(\"input\", {\n              type: \"radio\",\n              defaultChecked: this.opt(opt, 'IENA/departure'),\n              id: \"IENAd\",\n              name: \"select\",\n              value: \"IENA/departure\",\n              onClick: this.handleOpt\n            }), _jsx(\"label\", {\n              className: \"selectcard-cc IENAd-card\",\n              for: \"IENAd\"\n            }), _jsx(\"input\", {\n              type: \"radio\",\n              defaultChecked: this.opt(opt, 'IENA/arrival'),\n              id: \"IENAa\",\n              name: \"select\",\n              value: \"IENA/arrival\",\n              onClick: this.handleOpt\n            }), _jsx(\"label\", {\n              className: \"selectcard-cc IENAa-card\",\n              for: \"IENAa\"\n            })]\n          })]\n        }), _jsx(\"div\", {\n          className: \"gui-back\",\n          onClick: this.props.show,\n          children: \" \"\n        })]\n      });\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nvar Stop = function (_React$Component3) {\n  _inherits(Stop, _React$Component3);\n\n  var _super3 = _createSuper(Stop);\n\n  function Stop() {\n    _classCallCheck(this, Stop);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Stop, [{\n    key: \"render\",\n    value: function render() {\n      var stop = this.props.stop;\n      var name = stop.stop_point.name;\n      var id = stop.stop_point.uic_code;\n      var onover = this.props.onover;\n      var url;\n      if (window.location.href.indexOf('mylines.fr/embed') >= 0) url = '/embed/' + this.props.opt + '/' + this.props.auth + '/';else url = '/' + this.props.opt + '/';\n      return _jsx(Link, {\n        to: url + id + '?gui',\n        className: onover == true ? 'overmouse2' : 'overmouse',\n        onClick: this.props.show,\n        children: _jsx(\"div\", {\n          children: name\n        })\n      });\n    }\n  }]);\n\n  return Stop;\n}(React.Component);\n\nexport default Gare;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020'\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n    width: '92%'\n  },\n  input: {\n    color: '#fff'\n  }\n});","map":{"version":3,"sources":["/home/code/app/gare.js"],"names":["React","Gare","props","state","query","onChangeText","bind","e","setState","styles","container","title","form","input","Component","Search","show","load","curent","type","opt","stops","getStops","handleChange","handleKey","handleOpt","searchInput","focus","event","target","value","keyCode","len","preventDefault","url","window","location","href","indexOf","stop_point","uic_code","auth","fetch","method","then","res","json","data","stop_points","length","catch","err","a","b","displayForce","inputEl","map","stop","i","logo","Date","getFullYear","github","discord","mail","Stop","name","id","onover","StyleSheet","create","flex","backgroundColor","borderColor","borderWidth","borderRadius","marginTop","marginLeft","padding","color","fontSize","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RefreshControl, Pressable, StatusBar, SafeAreaView, ScrollView, StyleSheet, Text, TextInput, View, Image  } from 'react-native';\n  \nclass Gare extends React.Component  {\n  constructor(props) {\n\t\tsuper(props);\n    this.state = {\n        query : ''\n    }\n    this.onChangeText = this.onChangeText.bind(this)\n\t}\n\n  onChangeText(e){\n    this.setState({\n      query: e\n    })\n  }\n\trender(){\n\n\t\treturn (\n      <SafeAreaView  style={styles.container}>          \n          <View>  \n            <Text style={styles.title}>Bienvenue !</Text>\n            <View style={styles.form}>\n              <TextInput\n                style={styles.input}\n                onChangeText={this.onChangeText}\n                value={this.state.query}\n\n                placeholder = 'Rechercher une gare'\n                placeholderTextColor = '#ccc'\n              />\n            </View> \n            <Text>{this.state.query}</Text>   \n            \n          </View>\n      </SafeAreaView >\n    );\n  }\n}\n\nclass Search extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\tload: false,\n\t\t\tquery: '',\n\t\t\tcurent: 0,\n\t\t\ttype: 0,\n\t\t\topt: 'SNCF/departure',\n\t\t\tstops: [],\n\t\t};\n\t\tthis.getStops('');\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleKey = this.handleKey.bind(this);\n\n\t\tthis.handleOpt = this.handleOpt.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.searchInput.focus();\n\n\t\tif (typeof this.props.opt !== 'undefined')\n\t\t\tthis.setState({\n\t\t\t\topt: this.props.opt\n\t\t\t});\n\t}\n\n\thandleChange(event) {\n\t\tthis.setState({\n\t\t\tquery: event.target.value,\n\t\t\tcurent: 0\n\t\t});\n\t\tthis.getStops(event.target.value);\n\t}\n\n\thandleKey(event) {\n\t\tif (event.keyCode == 40 && this.state.curent < this.state.len){\n\t\t\tthis.setState({ curent: this.state.curent + 1 });\n\t\t\tevent.preventDefault();\n\n\t\t} else if (event.keyCode == 38 && this.state.curent != 0){\n\t\t\tthis.setState({ curent: this.state.curent - 1 });\n\t\t\tevent.preventDefault();\n\t\t\n\t\t} else if (event.keyCode == 13){\n\t\t\t\n\t\t\tlet url;\n\t\t\tif (window.location.href.indexOf('mylines.fr/embed') >= 0)\n\t\t\t\turl = '/embed/' + this.state.opt + '/' + this.state.stops[this.state.curent].stop_point.uic_code + '/' + this.props.auth + '?gui';\n\t\t\telse\t\n\t\t\t\turl = '/' + this.state.opt + '/' + this.state.stops[this.state.curent].stop_point.uic_code + '?gui';\n\t\t\t\t\n\t\t\twindow.location = url;\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\thandleOpt(event){\n\t\tthis.setState({\n\t\t\topt: event.target.value\n\t\t});\n\t}\n\t\t\n\tgetStops(query) {\n\t\tthis.setState({ load: true });\n\n\t\tlet url;\n\t\tif (window.location.href.indexOf('mylines.fr/embed') >= 0)\n\t\t\turl = 'https://api.mylines.fr/te/search?auth=' + this.props.auth + '&q=' + query;\n\t\telse \n\t\t\turl = 'https://api.mylines.fr/sncf/search?q=' + query;\n\t\t\n\t\tfetch(url, {\n\t\t\tmethod: 'get'\n\t\t\t})\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tstops: data.stop_points,\n\t\t\t\tlen: (data.stop_points.length -1),\n\t\t\t\tload: false\n\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.setState({ load: false });\n\t\t});\n\t}\n\n\topt(a, b){\n\t\tif (a == b) return true;\n\t\treturn false;\n\t}\n\n\trender(){\n\t\tlet opt = this.props.opt;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"gui\">\n\t\t\t\t\t{this.props.displayForce == false ? <div onClick={this.props.show} className=\"close\">Fermer</div> : <></>}\t\t\t\t\t\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t<input type=\"text\" placeholder=\"Rechercher une autre gare\" ref={inputEl => (this.searchInput = inputEl)} onChange={this.handleChange} onKeyDown={this.handleKey} autocomplete=\"off\" /> \n\t\t\t\t\t{this.state.load ? <div> <div className=\"progress-bck\"></div> <div className=\"progress indeterminate\"></div></div> : <></>}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t<div className=\"stopList\"> \n\t\t\t\t   \n\t\t\t\t\t\t{this.state.stops.map((stop, i) => (\n\t\t\t\t\t\t\t<GuiStop \n\t\t\t\t\t\t\t\tkey = {i}\n\t\t\t\t\t\t\t\tstop = {stop}\n\t\t\t\t\t\t\t\tonover = {i == this.state.curent ? true : false}\n\t\t\t\t\t\t\t\tauth = {this.props.auth}\n\t\t\t\t\t\t\t\topt = {this.state.opt}\n\t\t\t\t\t\t\t\tshow = {this.props.show}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{this.state.stops.length == 0 ? <div className=\"center\">Aucun résultat</div> : <></>}\n\n\t\t\t\t\t\t<div className=\"about\">\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<div className=\"hr\"></div>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<img src={logo} className=\"logo\" alt=\"Logo MyLines Embed\" />\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tMyLines 2021 - {new Date().getFullYear()} • Version 1.3.1 • {window.location.href.indexOf('mylines.fr/embed') >= 0 ? <> Train-Empire</> : <> SNCF</>}\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\tMade with 💖\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<br/>\t\n\t\t\t\t\t\t\t<a href=\"https://github.com/MaisClement/MyLinesEmbed\" className=\"mini_fluent_btn\"> <img src={github} alt=\"github\" /> </a>\n\t\t\t\t\t\t\t<a href=\"http://discord.mylines.fr\" className=\"mini_fluent_btn\"> <img src={discord} alt=\"discord\" /> </a>\n\t\t\t\t\t\t\t<a href=\"mailto:admin@mylines.fr\" className=\"mini_fluent_btn\"> <img src={mail} alt=\"mail\"/> </a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"gui-menu\">\n\t\t\t\t\t<div className=\"hr\"></div>\n\t\t\t\t\t<h3>Style d'affichage</h3>\n\n\t\t\t\t\t<div className=\"cc-selector\">\n\t\t\t\t\t\t<input type=\"radio\" defaultChecked={this.opt(opt, 'SNCF/departure')}   id=\"SNCFd\" name=\"select\"\tvalue=\"SNCF/departure\" onClick={this.handleOpt}/>\n\t\t\t\t\t\t<label className=\"selectcard-cc SNCFd-card\"\t   for=\"SNCFd\"></label>\n\t\t\t\t\t\t<input type=\"radio\" defaultChecked={this.opt(opt, 'SNCF/arrival')}   id=\"SNCFa\"   name=\"select\"\tvalue=\"SNCF/arrival\" onClick={this.handleOpt}/>\n\t\t\t\t\t\t<label className=\"selectcard-cc SNCFa-card\"\t\t for=\"SNCFa\"></label>\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t<input type=\"radio\" defaultChecked={this.opt(opt, 'IENA/departure')}   id=\"IENAd\" name=\"select\"\tvalue=\"IENA/departure\" onClick={this.handleOpt}/>\n\t\t\t\t\t\t<label className=\"selectcard-cc IENAd-card\"\t   for=\"IENAd\"></label>\n\t\t\t\t\t\t<input type=\"radio\" defaultChecked={this.opt(opt, 'IENA/arrival')}   id=\"IENAa\"   name=\"select\"\tvalue=\"IENA/arrival\" onClick={this.handleOpt}/>\n\t\t\t\t\t\t<label className=\"selectcard-cc IENAa-card\"\t\t for=\"IENAa\"></label>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div className='gui-back' onClick={this.props.show}> </div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Stop extends React.Component {\n\trender(){\t\t\n\t\tlet stop = this.props.stop;\n\t\tlet name = stop.stop_point.name;\n\t\tlet id = stop.stop_point.uic_code;\n\t\tlet onover = this.props.onover;\n\n\t\tlet url;\n\t\tif (window.location.href.indexOf('mylines.fr/embed') >= 0)\n            url = '/embed/' + this.props.opt + '/' + this.props.auth + '/'\n\t\telse\t\n\t\t\turl = '/' + this.props.opt + '/'\n\n\t\treturn (\n\t\t\t<Link to={url + id + '?gui'} className={onover == true ? 'overmouse2' : 'overmouse'} onClick={this.props.show}>\n\t\t\t\t<div>\n\t\t\t\t{name}\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n\n\nexport default Gare;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020',\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n    width: '92%',\n  },\n  input: {\n    color: '#fff',\n  }\n});\n"]},"metadata":{},"sourceType":"module"}