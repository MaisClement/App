{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Gare_1 = function (_React$Component) {\n  _inherits(Gare_1, _React$Component);\n\n  var _super = _createSuper(Gare_1);\n\n  function Gare_1(props) {\n    var _this;\n\n    _classCallCheck(this, Gare_1);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      uic_code: 0,\n      trains: [],\n      error: '',\n      error_message: ''\n    };\n\n    _this.getTrain();\n\n    return _this;\n  }\n\n  _createClass(Gare_1, [{\n    key: \"getTrain\",\n    value: function getTrain() {\n      var _this2 = this;\n\n      var stop = this.props.stop;\n      var url = 'https://api.mylines.fr/sncf/' + this.props.type + '?stop=' + stop + '&count=10';\n      fetch(url, {\n        method: 'get'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.error && data.error == '200') {\n          _this2.setState({\n            error: ':/',\n            error_message: 'La gare indiqué ne semble pas exister. Vérifier l\\'url saisie ou réessayez dans quelques minutes.'\n          });\n        } else if (data.error) {\n          _this2.setState({\n            error: data.error,\n            error_message: data.error_message\n          });\n        }\n\n        _this2.setState({\n          trains: data.trains,\n          uic_code: stop\n        });\n      }).catch(function (err) {\n        _this2.setState({\n          error: ':/',\n          error_message: 'Récupération des trains impossible.'\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var gare = '';\n      if (typeof this.state.trains !== 'undefined' && typeof this.state.trains[0] !== 'undefined') gare = this.state.trains[0].informations.stop_point;\n\n      if (this.state.error != 0 || this.state.error != '') {\n        return _jsx(Text, {\n          children: \"Pas content\"\n        });\n      }\n\n      if (this.state.trains.length == 0) {\n        return _jsx(ActivityIndicator, {});\n      } else {\n        return _jsx(_Fragment, {\n          children: _jsxs(\"div\", {\n            className: this.props.type,\n            children: [_jsx(\"div\", {\n              className: \"Mobile\",\n              children: this.state.showDetails === true ? _jsx(Details, {\n                train: this.state.trains[this.state.showId],\n                number: this.state.showId,\n                showDetails: this.showDetails,\n                gare: gare,\n                type: this.props.type\n              }, this.state.showId) : _jsxs(_Fragment, {\n                children: [_jsxs(\"div\", {\n                  className: \"gui-mobile head-mobile\",\n                  children: [_jsx(Link, {\n                    to: \"/\",\n                    children: _jsx(\"img\", {\n                      src: back,\n                      alt: \"retour\"\n                    })\n                  }), _jsxs(\"span\", {\n                    children: [\" \", _jsx(\"b\", {\n                      children: gare\n                    }), \" \"]\n                  })]\n                }), _jsx(\"div\", {\n                  className: \"mobile-global\",\n                  children: this.state.trains.map(function (train, i) {\n                    return _jsx(\"div\", {\n                      onClick: function onClick() {\n                        return _this3.showDetails(i);\n                      },\n                      children: _jsx(Train, {\n                        train: train,\n                        number: i,\n                        showInfo: _this3.state.showInfo,\n                        type: _this3.props.type\n                      }, i)\n                    });\n                  })\n                })]\n              })\n            }), _jsx(Footer, {})]\n          })\n        });\n      }\n    }\n  }]);\n\n  return Gare_1;\n}(React.Component);\n\nvar Train = function (_React$Component2) {\n  _inherits(Train, _React$Component2);\n\n  var _super2 = _createSuper(Train);\n\n  function Train(props) {\n    var _this4;\n\n    _classCallCheck(this, Train);\n\n    _this4 = _super2.call(this, props);\n    _this4.state = {\n      width: window.innerWidth\n    };\n    _this4.handleResize = _this4.handleResize.bind(_assertThisInitialized(_this4));\n    return _this4;\n  }\n\n  _createClass(Train, [{\n    key: \"handleResize\",\n    value: function handleResize(e) {\n      this.setState({\n        width: window.innerWidth\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.handleResize);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.addEventListener(\"resize\", this.handleResize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (typeof this.props.train === 'undefined') {\n        return _jsx(_Fragment, {});\n      }\n\n      var head;\n      if (this.props.type == 'departure') head = this.props.train.informations.direction.name;else head = this.props.train.informations.origin.name;\n      var network = this.props.train.informations.network;\n      var code = this.props.train.informations.code;\n      var name = this.props.train.informations.trip_name;\n      var real_time;\n      var base_time;\n      var created_base_time;\n\n      if (this.props.type == 'departure') {\n        if (typeof this.props.train.stop_date_time.base_departure_date_time !== 'undefined') {\n          created_base_time = createDate(this.props.train.stop_date_time.base_departure_date_time);\n          base_time = this.props.train.stop_date_time.base_departure_date_time;\n        } else {\n          created_base_time = createDate(this.props.train.stop_date_time.departure_date_time);\n          base_time = this.props.train.stop_date_time.departure_date_time;\n        }\n\n        real_time = this.props.train.stop_date_time.departure_date_time;\n      } else {\n        if (typeof this.props.train.stop_date_time.base_arrival_date_time !== 'undefined') {\n          created_base_time = createDate(this.props.train.stop_date_time.base_arrival_date_time);\n          base_time = this.props.train.stop_date_time.base_arrival_date_time;\n        } else {\n          created_base_time = createDate(this.props.train.stop_date_time.arrival_date_time);\n          base_time = this.props.train.stop_date_time.arrival_date_time;\n        }\n\n        real_time = this.props.train.stop_date_time.arrival_date_time;\n      }\n\n      var status = this.props.train.informations.status;\n      var message = this.props.train.informations.message;\n      return _jsxs(_Fragment, {\n        children: [_jsx(\"table\", {\n          children: _jsxs(\"tbody\", {\n            children: [_jsxs(\"tr\", {\n              children: [_jsxs(\"td\", {\n                className: \"dest\",\n                children: [_jsx(\"img\", {\n                  src: 'https://mylines.fr/embed.php?serv=' + network,\n                  className: \"img\",\n                  alt: \"Logo service\"\n                }), head]\n              }), _jsxs(\"td\", {\n                className: \"time\",\n                rowSpan: 2,\n                children: [_jsxs(\"span\", {\n                  children: [created_base_time.getHours() < 10 ? '0' + created_base_time.getHours() : created_base_time.getHours(), \":\", created_base_time.getMinutes() < 10 ? '0' + created_base_time.getMinutes() : created_base_time.getMinutes()]\n                }), _jsx(\"br\", {}), _jsx(Info, {\n                  real_time: real_time,\n                  base_time: base_time,\n                  status: status,\n                  message: message\n                })]\n              })]\n            }), _jsx(\"tr\", {\n              className: \"train\",\n              children: _jsxs(\"td\", {\n                className: \"trafic\",\n                children: [\" \", code == name ? _jsx(_Fragment, {\n                  children: code\n                }) : _jsxs(_Fragment, {\n                  children: [code, \" - \", name]\n                }), \" \"]\n              })\n            })]\n          })\n        }), _jsx(\"div\", {\n          className: \"hr\"\n        })]\n      });\n    }\n  }]);\n\n  return Train;\n}(React.Component);\n\nvar Info = function (_React$Component3) {\n  _inherits(Info, _React$Component3);\n\n  var _super3 = _createSuper(Info);\n\n  function Info() {\n    _classCallCheck(this, Info);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Info, [{\n    key: \"render\",\n    value: function render() {\n      var real_time = this.props.real_time;\n      var base_time = this.props.base_time;\n      var status = this.props.status;\n      var message = this.props.message;\n      if (status == 'deleted') return _jsx(\"span\", {\n        className: \"deleted\",\n        children: \" supprim\\xE9 \"\n      });\n      if (status == 'late') return _jsx(\"span\", {\n        className: \"late\",\n        children: \" retard\\xE9 \"\n      });\n      if (status == 'real_time') return _jsx(\"span\", {\n        className: \"late\",\n        children: \" temps r\\xE9el \"\n      });\n      if (message == 'idf') return _jsx(\"span\", {\n        className: \"info\",\n        children: \" th\\xE9orique \"\n      });\n      real_time = createDate(real_time);\n      base_time = createDate(base_time);\n\n      if (real_time < base_time) {\n        real_time.setDate(real_time.getDate());\n      }\n\n      var diff = real_time - base_time;\n      var msec = diff;\n      var hh = Math.floor(msec / 1000 / 60 / 60);\n      msec -= hh * 1000 * 60 * 60;\n      var mm = Math.floor(msec / 1000 / 60);\n      msec -= mm * 1000 * 60;\n\n      if (mm > 0) {\n        if (message == 'idf_realtime') {\n          if (hh == 0 && mm <= 5) return _jsxs(\"span\", {\n            className: \"info\",\n            children: [\" + \", mm, \" min \"]\n          });else if (hh == 0) return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" + \", mm, \" min \"]\n          });else return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" + \", hh, \"h\", mm, \" \"]\n          });\n        } else {\n          if (hh == 0) return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" retard : \", mm, \" min \"]\n          });else return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" retard : \", hh, \"h\", mm, \" \"]\n          });\n        }\n      } else if (typeof this.props.displayAll !== 'undefined') return _jsx(\"span\", {\n        className: \"info\",\n        children: \" \\xE0 l'heure \"\n      });else return _jsx(_Fragment, {});\n    }\n  }]);\n\n  return Info;\n}(React.Component);\n\nfunction createDate(date) {\n  var el = new Date(date.substring(0, 4), date.substring(4, 6), date.substring(6, 8), date.substring(9, 11), date.substring(11, 13), 0, 0);\n  return el;\n}\n\nexport default Gare_1;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020'\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20\n  },\n  input: {\n    color: '#fff'\n  },\n  loadSpace: {\n    height: 3\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2\n  }\n});","map":{"version":3,"sources":["/home/code/app/gare_1.js"],"names":["React","useRoute","useNavigation","NavigationContainer","ProgressBar","Colors","Gare_1","props","state","uic_code","trains","error","error_message","getTrain","stop","url","type","fetch","method","then","res","json","data","setState","catch","err","gare","informations","stop_point","length","showDetails","showId","back","map","train","i","showInfo","Component","Train","width","window","innerWidth","handleResize","bind","e","addEventListener","head","direction","name","origin","network","code","trip_name","real_time","base_time","created_base_time","stop_date_time","base_departure_date_time","createDate","departure_date_time","base_arrival_date_time","arrival_date_time","status","message","getHours","getMinutes","Info","setDate","getDate","diff","msec","hh","Math","floor","mm","displayAll","date","el","Date","substring","styles","StyleSheet","create","container","flex","backgroundColor","title","fontSize","textAlign","fontWeight","color","margin","form","borderColor","borderWidth","borderRadius","marginTop","marginLeft","marginRight","marginBottom","padding","input","loadSpace","height","tiles","tilesText","space"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RefreshControl, Pressable, StatusBar, SafeAreaView, ScrollView, StyleSheet, Text, TextInput, View, Image  } from 'react-native';\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\n  \nclass Gare_1 extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            uic_code: 0,\n            trains: [],\n\n            error: '',\n            error_message: '',\n        };\n        this.getTrain();\n\t}\n\t\n\tgetTrain() {\n        let stop = this.props.stop;\n        const url = 'https://api.mylines.fr/sncf/' + this.props.type + '?stop=' + stop + '&count=10';\n        \n\t\tfetch(url, {\n            method: 'get'\n        })\n    .then(res => res.json())\n    .then(data => {\n      if (data.error && data.error == '200') {\n          this.setState({\n              error: ':/',\n              error_message: 'La gare indiqué ne semble pas exister. Vérifier l\\'url saisie ou réessayez dans quelques minutes.'\n          }); \n      } else if (data.error) {\n          this.setState({\n              error: data.error,\n              error_message: data.error_message,\n          }); \n      } \n      this.setState({\n          trains: data.trains,\n          uic_code: stop\n      });\n    })\n    .catch(err => {\n        this.setState({\n            error: ':/',\n            error_message: 'Récupération des trains impossible.'\n        }); \n    });\n\t}\n\n\trender(){\n      let gare = '';\n      if (typeof this.state.trains !== 'undefined' && typeof this.state.trains[0] !== 'undefined' )\n        gare = this.state.trains[0].informations.stop_point;\n\n      if (this.state.error != 0 || this.state.error != ''){\n        return (\n            <Text>Pas content</Text>\n        );\n      }\n      if (this.state.trains.length == 0){\n        return (\n          <ActivityIndicator />  \n        );\n      } else {\n        return (\n            <>\n                <div className={this.props.type}>\n                    <div className=\"Mobile\">\n                        {this.state.showDetails === true ?\n                            <Details\n                                key = {this.state.showId} \n                                train = {this.state.trains[this.state.showId]}\n                                number = {this.state.showId}\n                                showDetails = {this.showDetails}\n                                gare = {gare}\n                                type = {this.props.type}\n                            />\n                            :\n                            <>\n                                <div className=\"gui-mobile head-mobile\">\n                                    <Link to=\"/\">\n                                        <img src={back} alt=\"retour\"/>\n                                    </Link>\n                                    <span> <b>{gare}</b> </span>\n                                </div>\n                                <div className=\"mobile-global\">\n                                    {this.state.trains.map((train, i) => (\n                                        <div onClick={() => this.showDetails(i)}>\n                                            <Train \n                                            key = {i} \n                                            train = {train}\n                                            number = {i}\n                                            showInfo = {this.state.showInfo}\n                                            type = {this.props.type}/>\n                                        </div>\n                                    ))}\n                                </div>\n                            </>\n                        }\n                        \n                    </div>\n                    <Footer />\n                </div>               \n            </>\n        );\n}\n\t}\n}\nclass Train extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { width: window.innerWidth };\n\n        this.handleResize = this.handleResize.bind(this);\n    }\n    \n    handleResize(e){\n        this.setState({ width: window.innerWidth });\n    };\n    \n    componentDidMount() {\n        window.addEventListener(\"resize\", this.handleResize);\n    }\n    \n    componentWillUnmount () {\n        window.addEventListener(\"resize\", this.handleResize);\n    } \n\n\trender(){\n        if (typeof this.props.train === 'undefined') {\n            return (\n                <>\n                </>\n            );\n        }\n\n        let head;\n        if (this.props.type == 'departure')\n            head = this.props.train.informations.direction.name;\n        else\n            head = this.props.train.informations.origin.name;\n\n        let network = this.props.train.informations.network;\n        let code = this.props.train.informations.code;\n        let name = this.props.train.informations.trip_name;\n\n        let real_time;\n        let base_time;\n        let created_base_time;\n        \n        if (this.props.type == 'departure'){\n            if (typeof this.props.train.stop_date_time.base_departure_date_time !== 'undefined') {\n                created_base_time = createDate(this.props.train.stop_date_time.base_departure_date_time);\n                base_time = this.props.train.stop_date_time.base_departure_date_time;\n            } else {\n                created_base_time = createDate(this.props.train.stop_date_time.departure_date_time);\n                base_time = this.props.train.stop_date_time.departure_date_time;\n            }\n            real_time = this.props.train.stop_date_time.departure_date_time;\n        } else {\n            if (typeof this.props.train.stop_date_time.base_arrival_date_time !== 'undefined') {\n                created_base_time = createDate(this.props.train.stop_date_time.base_arrival_date_time);\n                base_time = this.props.train.stop_date_time.base_arrival_date_time;\n            } else {\n                created_base_time = createDate(this.props.train.stop_date_time.arrival_date_time);\n                base_time = this.props.train.stop_date_time.arrival_date_time;\n            }\n            real_time = this.props.train.stop_date_time.arrival_date_time;\n        }\n\n        let status = this.props.train.informations.status;\n        let message = this.props.train.informations.message;\n\n        return (\n            <>\n                <table>\n                    <tbody>\n                        <tr>\n                            <td className=\"dest\">\n                                <img src={'https://mylines.fr/embed.php?serv=' + network} className='img' alt=\"Logo service\"/>\n                                {head}\n                            </td>\n                            <td className=\"time\" rowSpan={2}>\n                                <span>{(created_base_time.getHours() < 10) ? '0' + created_base_time.getHours() : created_base_time.getHours()}:{(created_base_time.getMinutes() < 10) ? '0' + created_base_time.getMinutes() : created_base_time.getMinutes()}</span>\n                                    <br />\n                                <Info real_time={real_time} base_time={base_time} status={status} message={message}/>\n                            </td>\n                            \n                        </tr>\n                        <tr className='train'>\n                            <td className=\"trafic\"> {code == name ? <>{code}</> : <>{code} - {name}</>} </td>\n                        </tr>\n                    </tbody>\n                </table>\n\t\t\t\t\n                <div className='hr'></div>\n\t\t\t</>\n            \n        );\n\t}\n}\n\nclass Info extends React.Component {\n\trender(){\n\n        let real_time = this.props.real_time;\n        let base_time = this.props.base_time;\n        let status = this.props.status;\n        let message = this.props.message;\n\n        if (status == 'deleted')\n            return ( <span className=\"deleted\"> supprimé </span> );\n\n        if (status == 'late')\n            return ( <span className=\"late\"> retardé </span> );\n\n        if (status == 'real_time')\n            return ( <span className=\"late\"> temps réel </span> );\n        \n        if (message == 'idf')\n            return ( <span className=\"info\"> théorique </span> );\n\n        real_time = createDate(real_time);\n        base_time = createDate(base_time);\n        \n        \n        if (real_time < base_time) {\n            real_time.setDate(real_time.getDate());\n        }\n        \n        var diff = real_time - base_time;\n        var msec = diff;\n        var hh = Math.floor(msec / 1000 / 60 / 60);\n        msec -= hh * 1000 * 60 * 60;\n        var mm = Math.floor(msec / 1000 / 60);\n        msec -= mm * 1000 * 60;\n\n        if (mm > 0){\n            if (message == 'idf_realtime'){\n                if (hh == 0 && mm <= 5)\n                    return ( <span className=\"info\"> + {mm} min </span> );\n                else if (hh == 0)\n                    return ( <span className=\"late\"> + {mm} min </span> );\n                else \n                    return ( <span className=\"late\"> + {hh}h{mm} </span> );\n            } else {\n                if (hh == 0)\n                    return ( <span className=\"late\"> retard : {mm} min </span> );\n                else \n                    return ( <span className=\"late\"> retard : {hh}h{mm} </span> );\n            }\n        } else if (typeof this.props.displayAll !== 'undefined')\n            return ( <span className=\"info\"> à l'heure </span> );\n        else\n            return ( <></> );\n\t}   \n}\nfunction createDate(date){\n    let el = new Date(date.substring(0, 4), date.substring(4, 6), date.substring(6, 8), date.substring(9, 11), date.substring(11, 13), 0, 0); \n    return el;\n}\n\nexport default Gare_1;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020',\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23,\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n  },\n  input: {\n    color: '#fff',\n  },\n  loadSpace: {\n    height: 3,\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5,\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20,\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2,\n  }\n});\n"]},"metadata":{},"sourceType":"module"}