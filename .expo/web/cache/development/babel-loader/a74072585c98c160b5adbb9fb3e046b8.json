{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Gare = function (_React$Component) {\n  _inherits(Gare, _React$Component);\n\n  var _super = _createSuper(Gare);\n\n  function Gare(props) {\n    var _this;\n\n    _classCallCheck(this, Gare);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      query: '',\n      stops: [],\n      onload: false\n    };\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Gare, [{\n    key: \"onChangeText\",\n    value: function onChangeText(e) {\n      this.setState({\n        query: e,\n        onload: true\n      });\n      this.getStops();\n    }\n  }, {\n    key: \"getStops\",\n    value: function getStops() {\n      var _this2 = this;\n\n      var query = this.state.query;\n      var url = 'https://api.mylines.fr/sncf/search?q=' + query;\n      fetch(url, {\n        method: 'get'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.setState({\n          stops: data.stop_points,\n          onload: false\n        });\n      }).catch(function (err) {\n        _this2.setState({\n          onload: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsx(SafeAreaView, {\n        style: styles.container,\n        children: _jsxs(View, {\n          children: [_jsx(Text, {\n            style: styles.title,\n            children: \"Rechercher une gare\"\n          }), _jsx(View, {\n            style: styles.form,\n            children: _jsx(TextInput, {\n              style: styles.input,\n              onChangeText: this.onChangeText,\n              value: this.state.query,\n              autoFocus: true,\n              placeholder: \"Rechercher une gare\",\n              placeholderTextColor: \"#ccc\"\n            })\n          }), _jsx(Search, {})]\n        })\n      });\n    }\n  }]);\n\n  return Gare;\n}(React.Component);\n\nvar Search = function (_React$Component2) {\n  _inherits(Search, _React$Component2);\n\n  var _super2 = _createSuper(Search);\n\n  function Search() {\n    _classCallCheck(this, Search);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var opt = this.props.opt;\n      return _jsx(_Fragment, {\n        children: _jsxs(\"div\", {\n          className: \"gui\",\n          children: [this.props.displayForce == false ? _jsx(\"div\", {\n            onClick: this.props.show,\n            className: \"close\",\n            children: \"Fermer\"\n          }) : _jsx(_Fragment, {}), _jsx(\"br\", {}), _jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Rechercher une autre gare\",\n            ref: function ref(inputEl) {\n              return _this3.searchInput = inputEl;\n            },\n            onChange: this.handleChange,\n            onKeyDown: this.handleKey,\n            autocomplete: \"off\"\n          }), this.state.load ? _jsxs(\"div\", {\n            children: [\" \", _jsx(\"div\", {\n              className: \"progress-bck\"\n            }), \" \", _jsx(\"div\", {\n              className: \"progress indeterminate\"\n            })]\n          }) : _jsx(_Fragment, {}), _jsx(\"br\", {}), _jsxs(\"div\", {\n            className: \"stopList\",\n            children: [this.state.stops.map(function (stop, i) {\n              return _jsx(GuiStop, {\n                stop: stop,\n                onover: i == _this3.state.curent ? true : false,\n                auth: _this3.props.auth,\n                opt: _this3.state.opt,\n                show: _this3.props.show\n              }, i);\n            }), this.state.stops.length == 0 ? _jsx(\"div\", {\n              className: \"center\",\n              children: \"Aucun r\\xE9sultat\"\n            }) : _jsx(_Fragment, {})]\n          })]\n        })\n      });\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nvar Stop = function (_React$Component3) {\n  _inherits(Stop, _React$Component3);\n\n  var _super3 = _createSuper(Stop);\n\n  function Stop() {\n    _classCallCheck(this, Stop);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Stop, [{\n    key: \"render\",\n    value: function render() {\n      var stop = this.props.stop;\n      var name = stop.stop_point.name;\n      var id = stop.stop_point.uic_code;\n      var onover = this.props.onover;\n      var url;\n      if (window.location.href.indexOf('mylines.fr/embed') >= 0) url = '/embed/' + this.props.opt + '/' + this.props.auth + '/';else url = '/' + this.props.opt + '/';\n      return _jsx(Link, {\n        to: url + id + '?gui',\n        className: onover == true ? 'overmouse2' : 'overmouse',\n        onClick: this.props.show,\n        children: _jsx(\"div\", {\n          children: name\n        })\n      });\n    }\n  }]);\n\n  return Stop;\n}(React.Component);\n\nexport default Gare;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020'\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n    width: '92%'\n  },\n  input: {\n    color: '#fff'\n  }\n});","map":{"version":3,"sources":["/home/code/app/gare.js"],"names":["React","Gare","props","state","query","stops","onload","onChangeText","bind","e","setState","getStops","url","fetch","method","then","res","json","data","stop_points","catch","err","styles","container","title","form","input","Component","Search","opt","displayForce","show","inputEl","searchInput","handleChange","handleKey","load","map","stop","i","curent","auth","length","Stop","name","stop_point","id","uic_code","onover","window","location","href","indexOf","StyleSheet","create","flex","backgroundColor","fontSize","textAlign","fontWeight","color","margin","borderColor","borderWidth","borderRadius","marginTop","marginLeft","padding","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RefreshControl, Pressable, StatusBar, SafeAreaView, ScrollView, StyleSheet, Text, TextInput, View, Image  } from 'react-native';\n  \nclass Gare extends React.Component  {\n  constructor(props) {\n\t\tsuper(props);\n    this.state = {\n        query : '',\n        stops: [],\n        onload: false,\n    }\n    this.onChangeText = this.onChangeText.bind(this)\n\t}\n\n  onChangeText(e){\n    this.setState({\n      query: e,\n      onload: true\n    })\n    this.getStops();\n  }\n\n  getStops() {\n    const query = this.state.query;\n\t\tlet url = 'https://api.mylines.fr/sncf/search?q=' + query;\n\t\t\n\t\tfetch(url, {\n\t\t\tmethod: 'get'\n\t\t})\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tstops: data.stop_points,\n\t\t\t\tonload: false\n\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.setState({ onload: false });\n\t\t});\n\t}\n  \n\trender(){\n\t\treturn (\n      <SafeAreaView  style={styles.container}>          \n          <View>  \n            <Text style={styles.title}>Rechercher une gare</Text>\n            <View style={styles.form}>\n              <TextInput\n                style={styles.input}\n                onChangeText={this.onChangeText}\n                value={this.state.query}\n                autoFocus = {true}\n\n                placeholder = 'Rechercher une gare'\n                placeholderTextColor = '#ccc'\n              />\n            </View> \n\n            <Search></Search>    \n            \n          </View>\n      </SafeAreaView >\n    );\n  }\n}\n\nclass Search extends React.Component {\n\trender(){\n\t\tlet opt = this.props.opt;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"gui\">\n\t\t\t\t\t{this.props.displayForce == false ? <div onClick={this.props.show} className=\"close\">Fermer</div> : <></>}\t\t\t\t\t\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t<input type=\"text\" placeholder=\"Rechercher une autre gare\" ref={inputEl => (this.searchInput = inputEl)} onChange={this.handleChange} onKeyDown={this.handleKey} autocomplete=\"off\" /> \n\t\t\t\t\t{this.state.load ? <div> <div className=\"progress-bck\"></div> <div className=\"progress indeterminate\"></div></div> : <></>}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t<div className=\"stopList\"> \n\t\t\t\t   \n\t\t\t\t\t\t{this.state.stops.map((stop, i) => (\n\t\t\t\t\t\t\t<GuiStop \n\t\t\t\t\t\t\t\tkey = {i}\n\t\t\t\t\t\t\t\tstop = {stop}\n\t\t\t\t\t\t\t\tonover = {i == this.state.curent ? true : false}\n\t\t\t\t\t\t\t\tauth = {this.props.auth}\n\t\t\t\t\t\t\t\topt = {this.state.opt}\n\t\t\t\t\t\t\t\tshow = {this.props.show}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{this.state.stops.length == 0 ? <div className=\"center\">Aucun résultat</div> : <></>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nclass Stop extends React.Component {\n\trender(){\t\t\n\t\tlet stop = this.props.stop;\n\t\tlet name = stop.stop_point.name;\n\t\tlet id = stop.stop_point.uic_code;\n\t\tlet onover = this.props.onover;\n\n\t\tlet url;\n\t\tif (window.location.href.indexOf('mylines.fr/embed') >= 0)\n            url = '/embed/' + this.props.opt + '/' + this.props.auth + '/'\n\t\telse\t\n\t\t\turl = '/' + this.props.opt + '/'\n\n\t\treturn (\n\t\t\t<Link to={url + id + '?gui'} className={onover == true ? 'overmouse2' : 'overmouse'} onClick={this.props.show}>\n\t\t\t\t<div>\n\t\t\t\t{name}\n\t\t\t\t</div>\n\t\t\t</Link>\n\t\t);\n\t}\n}\n\n\nexport default Gare;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020',\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23,\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n    width: '92%',\n  },\n  input: {\n    color: '#fff',\n  }\n});\n"]},"metadata":{},"sourceType":"module"}