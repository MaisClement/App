{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction Gare_1(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var stop = route.params.stop;\n  return _jsx(Gare_Home, {\n    stop: stop\n  });\n}\n\nvar Gare_Home = function (_React$Component) {\n  _inherits(Gare_Home, _React$Component);\n\n  var _super = _createSuper(Gare_Home);\n\n  function Gare_Home(props) {\n    var _this;\n\n    _classCallCheck(this, Gare_Home);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      uic_code: _this.props.stop,\n      trains: [],\n      stop: _this.props.stop,\n      error: '',\n      error_message: '',\n      code: 0\n    };\n\n    _this.getTrains();\n\n    return _this;\n  }\n\n  _createClass(Gare_Home, [{\n    key: \"getTrains\",\n    value: function getTrains() {\n      var _this2 = this;\n\n      var stop = this.state.stop;\n      var type = 'departure';\n      var url = 'https://api.mylines.fr/sncf/' + type + '?stop=' + stop + '&count=10';\n      fetch(url, {\n        method: 'get'\n      }).then(function (response) {\n        return response.json().then(function (res) {\n          return {\n            status: response.status,\n            data: res\n          };\n        });\n      }).then(function (apiResponse) {\n        console.log(apiResponse);\n\n        _this2.setState({\n          code: apiResponse\n        });\n      }).then(function (data) {\n        _this2.setState({\n          trains: data.trains\n        });\n      }).catch(function (error) {\n        _this2.setState({\n          error: url,\n          error_message: error.message\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var gare = '';\n      if (typeof this.state.trains !== 'undefined' && typeof this.state.trains[0] !== 'undefined') gare = this.state.trains[0].informations.stop_point;\n\n      if (this.state.error != 0 || this.state.error != '') {\n        return _jsxs(Text, {\n          children: [\"Something wrong - \", this.state.error, \" - \", this.state.error_message]\n        });\n      }\n\n      if (!this.state.trains) {\n        return _jsx(View, {\n          style: styles.container,\n          children: _jsx(Text, {\n            children: \"Pas content\"\n          })\n        });\n      } else if (this.state.trains.length == 0) {\n        return _jsx(View, {\n          style: styles.container,\n          children: _jsx(ActivityIndicator, {\n            size: \"large\",\n            color: \"#0064aab7\"\n          })\n        });\n      } else {\n        return _jsx(_Fragment, {\n          children: _jsxs(View, {\n            children: [_jsxs(View, {\n              className: \"gui-mobile head-mobile\",\n              children: [_jsx(Pressable, {}), _jsxs(Text, {\n                children: [\" \", gare, \" \"]\n              })]\n            }), _jsx(View, {\n              className: \"mobile-global\",\n              children: this.state.trains.map(function (train, i) {\n                return _jsx(View, {\n                  onClick: function onClick() {\n                    return _this3.showDetails(i);\n                  },\n                  children: _jsx(Train, {\n                    train: train,\n                    number: i,\n                    showInfo: _this3.state.showInfo,\n                    type: _this3.props.type\n                  }, i)\n                });\n              })\n            })]\n          })\n        });\n      }\n    }\n  }]);\n\n  return Gare_Home;\n}(React.Component);\n\nvar Train = function (_React$Component2) {\n  _inherits(Train, _React$Component2);\n\n  var _super2 = _createSuper(Train);\n\n  function Train(props) {\n    var _this4;\n\n    _classCallCheck(this, Train);\n\n    _this4 = _super2.call(this, props);\n    _this4.state = {\n      width: window.innerWidth\n    };\n    _this4.handleResize = _this4.handleResize.bind(_assertThisInitialized(_this4));\n    return _this4;\n  }\n\n  _createClass(Train, [{\n    key: \"handleResize\",\n    value: function handleResize(e) {\n      this.setState({\n        width: window.innerWidth\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.handleResize);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.addEventListener(\"resize\", this.handleResize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (typeof this.props.train === 'undefined') {\n        return _jsx(_Fragment, {});\n      }\n\n      var head;\n      if (this.props.type == 'departure') head = this.props.train.informations.direction.name;else head = this.props.train.informations.origin.name;\n      var network = this.props.train.informations.network;\n      var code = this.props.train.informations.code;\n      var name = this.props.train.informations.trip_name;\n      var real_time;\n      var base_time;\n      var created_base_time;\n\n      if (this.props.type == 'departure') {\n        if (typeof this.props.train.stop_date_time.base_departure_date_time !== 'undefined') {\n          created_base_time = createDate(this.props.train.stop_date_time.base_departure_date_time);\n          base_time = this.props.train.stop_date_time.base_departure_date_time;\n        } else {\n          created_base_time = createDate(this.props.train.stop_date_time.departure_date_time);\n          base_time = this.props.train.stop_date_time.departure_date_time;\n        }\n\n        real_time = this.props.train.stop_date_time.departure_date_time;\n      } else {\n        if (typeof this.props.train.stop_date_time.base_arrival_date_time !== 'undefined') {\n          created_base_time = createDate(this.props.train.stop_date_time.base_arrival_date_time);\n          base_time = this.props.train.stop_date_time.base_arrival_date_time;\n        } else {\n          created_base_time = createDate(this.props.train.stop_date_time.arrival_date_time);\n          base_time = this.props.train.stop_date_time.arrival_date_time;\n        }\n\n        real_time = this.props.train.stop_date_time.arrival_date_time;\n      }\n\n      var status = this.props.train.informations.status;\n      var message = this.props.train.informations.message;\n      return _jsxs(_Fragment, {\n        children: [_jsx(\"table\", {\n          children: _jsxs(\"tbody\", {\n            children: [_jsxs(\"tr\", {\n              children: [_jsxs(\"td\", {\n                className: \"dest\",\n                children: [_jsx(\"img\", {\n                  src: 'https://mylines.fr/embed.php?serv=' + network,\n                  className: \"img\",\n                  alt: \"Logo service\"\n                }), head]\n              }), _jsxs(\"td\", {\n                className: \"time\",\n                rowSpan: 2,\n                children: [_jsxs(\"span\", {\n                  children: [created_base_time.getHours() < 10 ? '0' + created_base_time.getHours() : created_base_time.getHours(), \":\", created_base_time.getMinutes() < 10 ? '0' + created_base_time.getMinutes() : created_base_time.getMinutes()]\n                }), _jsx(\"br\", {}), _jsx(Info, {\n                  real_time: real_time,\n                  base_time: base_time,\n                  status: status,\n                  message: message\n                })]\n              })]\n            }), _jsx(\"tr\", {\n              className: \"train\",\n              children: _jsxs(\"td\", {\n                className: \"trafic\",\n                children: [\" \", code == name ? _jsx(_Fragment, {\n                  children: code\n                }) : _jsxs(_Fragment, {\n                  children: [code, \" - \", name]\n                }), \" \"]\n              })\n            })]\n          })\n        }), _jsx(\"div\", {\n          className: \"hr\"\n        })]\n      });\n    }\n  }]);\n\n  return Train;\n}(React.Component);\n\nvar Info = function (_React$Component3) {\n  _inherits(Info, _React$Component3);\n\n  var _super3 = _createSuper(Info);\n\n  function Info() {\n    _classCallCheck(this, Info);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Info, [{\n    key: \"render\",\n    value: function render() {\n      var real_time = this.props.real_time;\n      var base_time = this.props.base_time;\n      var status = this.props.status;\n      var message = this.props.message;\n      if (status == 'deleted') return _jsx(\"span\", {\n        className: \"deleted\",\n        children: \" supprim\\xE9 \"\n      });\n      if (status == 'late') return _jsx(\"span\", {\n        className: \"late\",\n        children: \" retard\\xE9 \"\n      });\n      if (status == 'real_time') return _jsx(\"span\", {\n        className: \"late\",\n        children: \" temps r\\xE9el \"\n      });\n      if (message == 'idf') return _jsx(\"span\", {\n        className: \"info\",\n        children: \" th\\xE9orique \"\n      });\n      real_time = createDate(real_time);\n      base_time = createDate(base_time);\n\n      if (real_time < base_time) {\n        real_time.setDate(real_time.getDate());\n      }\n\n      var diff = real_time - base_time;\n      var msec = diff;\n      var hh = Math.floor(msec / 1000 / 60 / 60);\n      msec -= hh * 1000 * 60 * 60;\n      var mm = Math.floor(msec / 1000 / 60);\n      msec -= mm * 1000 * 60;\n\n      if (mm > 0) {\n        if (message == 'idf_realtime') {\n          if (hh == 0 && mm <= 5) return _jsxs(\"span\", {\n            className: \"info\",\n            children: [\" + \", mm, \" min \"]\n          });else if (hh == 0) return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" + \", mm, \" min \"]\n          });else return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" + \", hh, \"h\", mm, \" \"]\n          });\n        } else {\n          if (hh == 0) return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" retard : \", mm, \" min \"]\n          });else return _jsxs(\"span\", {\n            className: \"late\",\n            children: [\" retard : \", hh, \"h\", mm, \" \"]\n          });\n        }\n      } else if (typeof this.props.displayAll !== 'undefined') return _jsx(\"span\", {\n        className: \"info\",\n        children: \" \\xE0 l'heure \"\n      });else return _jsx(_Fragment, {});\n    }\n  }]);\n\n  return Info;\n}(React.Component);\n\nfunction createDate(date) {\n  var el = new Date(date.substring(0, 4), date.substring(4, 6), date.substring(6, 8), date.substring(9, 11), date.substring(11, 13), 0, 0);\n  return el;\n}\n\nexport default Gare_1;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020'\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20\n  },\n  input: {\n    color: '#fff'\n  },\n  loadSpace: {\n    height: 3\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2\n  }\n});","map":{"version":3,"sources":["/home/code/app/gare_1.js"],"names":["React","useRoute","useNavigation","NavigationContainer","ProgressBar","Colors","Gare_1","route","navigation","stop","params","Gare_Home","props","state","uic_code","trains","error","error_message","code","getTrains","type","url","fetch","method","then","response","json","res","status","data","apiResponse","console","log","setState","catch","message","gare","informations","stop_point","styles","container","length","map","train","i","showDetails","showInfo","Component","Train","width","window","innerWidth","handleResize","bind","e","addEventListener","head","direction","name","origin","network","trip_name","real_time","base_time","created_base_time","stop_date_time","base_departure_date_time","createDate","departure_date_time","base_arrival_date_time","arrival_date_time","getHours","getMinutes","Info","setDate","getDate","diff","msec","hh","Math","floor","mm","displayAll","date","el","Date","substring","StyleSheet","create","flex","backgroundColor","title","fontSize","textAlign","fontWeight","color","margin","form","borderColor","borderWidth","borderRadius","marginTop","marginLeft","marginRight","marginBottom","padding","input","loadSpace","height","tiles","tilesText","space"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;;;;;;;;AAEA,SAASC,QAAT,EAAmBC,aAAnB,EAAkCC,mBAAlC,QAA6D,0BAA7D;AACA,SAASC,WAAT,EAAsBC,MAAtB,QAAoC,oBAApC;;;;;AAEA,SAASC,MAAT,OAAuC;AAAA,MAApBC,KAAoB,QAApBA,KAAoB;AAAA,MAAbC,UAAa,QAAbA,UAAa;AACrC,MAAQC,IAAR,GAAiBF,KAAK,CAACG,MAAvB,CAAQD,IAAR;AAEA,SAAU,KAAC,SAAD;AACE,IAAA,IAAI,EAAIA;AADV,IAAV;AAID;;IAEKE,S;;;;;AACL,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACHC,MAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWH,IADlB;AAEHM,MAAAA,MAAM,EAAE,EAFL;AAGHN,MAAAA,IAAI,EAAE,MAAKG,KAAL,CAAWH,IAHd;AAKHO,MAAAA,KAAK,EAAE,EALJ;AAMHC,MAAAA,aAAa,EAAE,EANZ;AAOHC,MAAAA,IAAI,EAAE;AAPH,KAAb;;AASE,UAAKC,SAAL;;AAXgB;AAYlB;;;;WAED,qBAAY;AAAA;;AACL,UAAIV,IAAI,GAAG,KAAKI,KAAL,CAAWJ,IAAtB;AAEA,UAAIW,IAAI,GAAG,WAAX;AACA,UAAIC,GAAG,GAAG,iCAAiCD,IAAjC,GAAwC,QAAxC,GAAmDX,IAAnD,GAA0D,WAApE;AAEAa,MAAAA,KAAK,CAACD,GAAD,EAAM;AACPE,QAAAA,MAAM,EAAE;AADD,OAAN,CAAL,CAGCC,IAHD,CAGM,UAACC,QAAD;AAAA,eAAcA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqB,UAAAG,GAAG;AAAA,iBAAK;AAACC,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MAAlB;AAA0BC,YAAAA,IAAI,EAAEF;AAAhC,WAAL;AAAA,SAAxB,CAAd;AAAA,OAHN,EAICH,IAJD,CAIM,UAACM,WAAD,EAAiB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;;AACA,QAAA,MAAI,CAACG,QAAL,CAAc;AACVf,UAAAA,IAAI,EAAEY;AADI,SAAd;AAGH,OATD,EAUCN,IAVD,CAUM,UAAAK,IAAI,EAAI;AACV,QAAA,MAAI,CAACI,QAAL,CAAc;AACVlB,UAAAA,MAAM,EAAEc,IAAI,CAACd;AADH,SAAd;AAGH,OAdD,EAeCmB,KAfD,CAeO,UAAClB,KAAD,EAAW;AACd,QAAA,MAAI,CAACiB,QAAL,CAAc;AACVjB,UAAAA,KAAK,EAAEK,GADG;AAEVJ,UAAAA,aAAa,EAAED,KAAK,CAACmB;AAFX,SAAd;AAIH,OApBD;AAqBN;;;WAED,kBAAQ;AAAA;;AACH,UAAIC,IAAI,GAAG,EAAX;AACA,UAAI,OAAO,KAAKvB,KAAL,CAAWE,MAAlB,KAA6B,WAA7B,IAA4C,OAAO,KAAKF,KAAL,CAAWE,MAAX,CAAkB,CAAlB,CAAP,KAAgC,WAAhF,EACEqB,IAAI,GAAG,KAAKvB,KAAL,CAAWE,MAAX,CAAkB,CAAlB,EAAqBsB,YAArB,CAAkCC,UAAzC;;AAEF,UAAI,KAAKzB,KAAL,CAAWG,KAAX,IAAoB,CAApB,IAAyB,KAAKH,KAAL,CAAWG,KAAX,IAAoB,EAAjD,EAAoD;AAClD,eACI,MAAC,IAAD;AAAA,2CAAyB,KAAKH,KAAL,CAAWG,KAApC,SAA8C,KAAKH,KAAL,CAAWI,aAAzD;AAAA,UADJ;AAGD;;AACD,UAAI,CAAC,KAAKJ,KAAL,CAAWE,MAAhB,EAAuB;AACrB,eACE,KAAC,IAAD;AAAM,UAAA,KAAK,EAAEwB,MAAM,CAACC,SAApB;AAAA,oBACE,KAAC,IAAD;AAAA;AAAA;AADF,UADF;AAKD,OAND,MAMO,IAAI,KAAK3B,KAAL,CAAWE,MAAX,CAAkB0B,MAAlB,IAA4B,CAAhC,EAAkC;AACvC,eACE,KAAC,IAAD;AAAM,UAAA,KAAK,EAAEF,MAAM,CAACC,SAApB;AAAA,oBACE,KAAC,iBAAD;AAAmB,YAAA,IAAI,EAAC,OAAxB;AAAgC,YAAA,KAAK,EAAC;AAAtC;AADF,UADF;AAKD,OANM,MAMA;AACL,eACI;AAAA,oBACI,MAAC,IAAD;AAAA,uBACI,MAAC,IAAD;AAAM,cAAA,SAAS,EAAC,wBAAhB;AAAA,yBACI,KAAC,SAAD,KADJ,EAGI,MAAC,IAAD;AAAA,gCAAQJ,IAAR;AAAA,gBAHJ;AAAA,cADJ,EAMI,KAAC,IAAD;AAAM,cAAA,SAAS,EAAC,eAAhB;AAAA,wBACK,KAAKvB,KAAL,CAAWE,MAAX,CAAkB2B,GAAlB,CAAsB,UAACC,KAAD,EAAQC,CAAR;AAAA,uBACnB,KAAC,IAAD;AAAM,kBAAA,OAAO,EAAE;AAAA,2BAAM,MAAI,CAACC,WAAL,CAAiBD,CAAjB,CAAN;AAAA,mBAAf;AAAA,4BACI,KAAC,KAAD;AAEA,oBAAA,KAAK,EAAID,KAFT;AAGA,oBAAA,MAAM,EAAIC,CAHV;AAIA,oBAAA,QAAQ,EAAI,MAAI,CAAC/B,KAAL,CAAWiC,QAJvB;AAKA,oBAAA,IAAI,EAAI,MAAI,CAAClC,KAAL,CAAWQ;AALnB,qBACOwB,CADP;AADJ,kBADmB;AAAA,eAAtB;AADL,cANJ;AAAA;AADJ,UADJ;AAuBP;AACC;;;;EA3FsB5C,KAAK,CAAC+C,S;;IA6FxBC,K;;;;;AACF,iBAAYpC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gCAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AAAEoC,MAAAA,KAAK,EAAEC,MAAM,CAACC;AAAhB,KAAb;AAEA,WAAKC,YAAL,GAAoB,OAAKA,YAAL,CAAkBC,IAAlB,gCAApB;AAJe;AAKlB;;;;WAED,sBAAaC,CAAb,EAAe;AACX,WAAKrB,QAAL,CAAc;AAAEgB,QAAAA,KAAK,EAAEC,MAAM,CAACC;AAAhB,OAAd;AACH;;;WAED,6BAAoB;AAChBD,MAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkC,KAAKH,YAAvC;AACH;;;WAED,gCAAwB;AACpBF,MAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkC,KAAKH,YAAvC;AACH;;;WAEJ,kBAAQ;AACD,UAAI,OAAO,KAAKxC,KAAL,CAAW+B,KAAlB,KAA4B,WAAhC,EAA6C;AACzC,eACI,mBADJ;AAIH;;AAED,UAAIa,IAAJ;AACA,UAAI,KAAK5C,KAAL,CAAWQ,IAAX,IAAmB,WAAvB,EACIoC,IAAI,GAAG,KAAK5C,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BoB,SAA9B,CAAwCC,IAA/C,CADJ,KAGIF,IAAI,GAAG,KAAK5C,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BsB,MAA9B,CAAqCD,IAA5C;AAEJ,UAAIE,OAAO,GAAG,KAAKhD,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BuB,OAA5C;AACA,UAAI1C,IAAI,GAAG,KAAKN,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BnB,IAAzC;AACA,UAAIwC,IAAI,GAAG,KAAK9C,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BwB,SAAzC;AAEA,UAAIC,SAAJ;AACA,UAAIC,SAAJ;AACA,UAAIC,iBAAJ;;AAEA,UAAI,KAAKpD,KAAL,CAAWQ,IAAX,IAAmB,WAAvB,EAAmC;AAC/B,YAAI,OAAO,KAAKR,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCC,wBAAvC,KAAoE,WAAxE,EAAqF;AACjFF,UAAAA,iBAAiB,GAAGG,UAAU,CAAC,KAAKvD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCC,wBAAjC,CAA9B;AACAH,UAAAA,SAAS,GAAG,KAAKnD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCC,wBAA5C;AACH,SAHD,MAGO;AACHF,UAAAA,iBAAiB,GAAGG,UAAU,CAAC,KAAKvD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCG,mBAAjC,CAA9B;AACAL,UAAAA,SAAS,GAAG,KAAKnD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCG,mBAA5C;AACH;;AACDN,QAAAA,SAAS,GAAG,KAAKlD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCG,mBAA5C;AACH,OATD,MASO;AACH,YAAI,OAAO,KAAKxD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCI,sBAAvC,KAAkE,WAAtE,EAAmF;AAC/EL,UAAAA,iBAAiB,GAAGG,UAAU,CAAC,KAAKvD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCI,sBAAjC,CAA9B;AACAN,UAAAA,SAAS,GAAG,KAAKnD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCI,sBAA5C;AACH,SAHD,MAGO;AACHL,UAAAA,iBAAiB,GAAGG,UAAU,CAAC,KAAKvD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCK,iBAAjC,CAA9B;AACAP,UAAAA,SAAS,GAAG,KAAKnD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCK,iBAA5C;AACH;;AACDR,QAAAA,SAAS,GAAG,KAAKlD,KAAL,CAAW+B,KAAX,CAAiBsB,cAAjB,CAAgCK,iBAA5C;AACH;;AAED,UAAI1C,MAAM,GAAG,KAAKhB,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BT,MAA3C;AACA,UAAIO,OAAO,GAAG,KAAKvB,KAAL,CAAW+B,KAAX,CAAiBN,YAAjB,CAA8BF,OAA5C;AAEA,aACI;AAAA,mBACI;AAAA,oBACI;AAAA,uBACI;AAAA,yBACI;AAAI,gBAAA,SAAS,EAAC,MAAd;AAAA,2BACI;AAAK,kBAAA,GAAG,EAAE,uCAAuCyB,OAAjD;AAA0D,kBAAA,SAAS,EAAC,KAApE;AAA0E,kBAAA,GAAG,EAAC;AAA9E,kBADJ,EAEKJ,IAFL;AAAA,gBADJ,EAKI;AAAI,gBAAA,SAAS,EAAC,MAAd;AAAqB,gBAAA,OAAO,EAAE,CAA9B;AAAA,2BACI;AAAA,6BAAQQ,iBAAiB,CAACO,QAAlB,KAA+B,EAAhC,GAAsC,MAAMP,iBAAiB,CAACO,QAAlB,EAA5C,GAA2EP,iBAAiB,CAACO,QAAlB,EAAlF,OAAkHP,iBAAiB,CAACQ,UAAlB,KAAiC,EAAlC,GAAwC,MAAMR,iBAAiB,CAACQ,UAAlB,EAA9C,GAA+ER,iBAAiB,CAACQ,UAAlB,EAAhM;AAAA,kBADJ,EAEQ,cAFR,EAGI,KAAC,IAAD;AAAM,kBAAA,SAAS,EAAEV,SAAjB;AAA4B,kBAAA,SAAS,EAAEC,SAAvC;AAAkD,kBAAA,MAAM,EAAEnC,MAA1D;AAAkE,kBAAA,OAAO,EAAEO;AAA3E,kBAHJ;AAAA,gBALJ;AAAA,cADJ,EAaI;AAAI,cAAA,SAAS,EAAC,OAAd;AAAA,wBACI;AAAI,gBAAA,SAAS,EAAC,QAAd;AAAA,gCAAyBjB,IAAI,IAAIwC,IAAR,GAAe;AAAA,4BAAGxC;AAAH,kBAAf,GAA6B;AAAA,6BAAGA,IAAH,SAAYwC,IAAZ;AAAA,kBAAtD;AAAA;AADJ,cAbJ;AAAA;AADJ,UADJ,EAqBI;AAAK,UAAA,SAAS,EAAC;AAAf,UArBJ;AAAA,QADJ;AA0BN;;;;EA3FkB1D,KAAK,CAAC+C,S;;IA8FpB0B,I;;;;;;;;;;;;;WACL,kBAAQ;AAED,UAAIX,SAAS,GAAG,KAAKlD,KAAL,CAAWkD,SAA3B;AACA,UAAIC,SAAS,GAAG,KAAKnD,KAAL,CAAWmD,SAA3B;AACA,UAAInC,MAAM,GAAG,KAAKhB,KAAL,CAAWgB,MAAxB;AACA,UAAIO,OAAO,GAAG,KAAKvB,KAAL,CAAWuB,OAAzB;AAEA,UAAIP,MAAM,IAAI,SAAd,EACI,OAAS;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA;AAAA,QAAT;AAEJ,UAAIA,MAAM,IAAI,MAAd,EACI,OAAS;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA,QAAT;AAEJ,UAAIA,MAAM,IAAI,WAAd,EACI,OAAS;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA,QAAT;AAEJ,UAAIO,OAAO,IAAI,KAAf,EACI,OAAS;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA,QAAT;AAEJ2B,MAAAA,SAAS,GAAGK,UAAU,CAACL,SAAD,CAAtB;AACAC,MAAAA,SAAS,GAAGI,UAAU,CAACJ,SAAD,CAAtB;;AAGA,UAAID,SAAS,GAAGC,SAAhB,EAA2B;AACvBD,QAAAA,SAAS,CAACY,OAAV,CAAkBZ,SAAS,CAACa,OAAV,EAAlB;AACH;;AAED,UAAIC,IAAI,GAAGd,SAAS,GAAGC,SAAvB;AACA,UAAIc,IAAI,GAAGD,IAAX;AACA,UAAIE,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,GAAG,IAAP,GAAc,EAAd,GAAmB,EAA9B,CAAT;AACAA,MAAAA,IAAI,IAAIC,EAAE,GAAG,IAAL,GAAY,EAAZ,GAAiB,EAAzB;AACA,UAAIG,EAAE,GAAGF,IAAI,CAACC,KAAL,CAAWH,IAAI,GAAG,IAAP,GAAc,EAAzB,CAAT;AACAA,MAAAA,IAAI,IAAII,EAAE,GAAG,IAAL,GAAY,EAApB;;AAEA,UAAIA,EAAE,GAAG,CAAT,EAAW;AACP,YAAI9C,OAAO,IAAI,cAAf,EAA8B;AAC1B,cAAI2C,EAAE,IAAI,CAAN,IAAWG,EAAE,IAAI,CAArB,EACI,OAAS;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,8BAA2BA,EAA3B;AAAA,YAAT,CADJ,KAEK,IAAIH,EAAE,IAAI,CAAV,EACD,OAAS;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,8BAA2BG,EAA3B;AAAA,YAAT,CADC,KAGD,OAAS;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,8BAA2BH,EAA3B,OAAgCG,EAAhC;AAAA,YAAT;AACP,SAPD,MAOO;AACH,cAAIH,EAAE,IAAI,CAAV,EACI,OAAS;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,qCAAkCG,EAAlC;AAAA,YAAT,CADJ,KAGI,OAAS;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,qCAAkCH,EAAlC,OAAuCG,EAAvC;AAAA,YAAT;AACP;AACJ,OAdD,MAcO,IAAI,OAAO,KAAKrE,KAAL,CAAWsE,UAAlB,KAAiC,WAArC,EACH,OAAS;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA,QAAT,CADG,KAGH,OAAS,mBAAT;AACV;;;;EArDiBlF,KAAK,CAAC+C,S;;AAuDzB,SAASoB,UAAT,CAAoBgB,IAApB,EAAyB;AACrB,MAAIC,EAAE,GAAG,IAAIC,IAAJ,CAASF,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkB,CAAlB,CAAT,EAA+BH,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkB,CAAlB,CAA/B,EAAqDH,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkB,CAAlB,CAArD,EAA2EH,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkB,EAAlB,CAA3E,EAAkGH,IAAI,CAACG,SAAL,CAAe,EAAf,EAAmB,EAAnB,CAAlG,EAA0H,CAA1H,EAA6H,CAA7H,CAAT;AACA,SAAOF,EAAP;AACH;;AAED,eAAe9E,MAAf;AAEA,IAAMiC,MAAM,GAAGgD,UAAU,CAACC,MAAX,CAAkB;AAC/BhD,EAAAA,SAAS,EAAE;AACTiD,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,eAAe,EAAE;AAFR,GADoB;AAK/BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE,EADL;AAELC,IAAAA,SAAS,EAAE,MAFN;AAGLC,IAAAA,UAAU,EAAE,MAHP;AAILC,IAAAA,KAAK,EAAE,MAJF;AAKLC,IAAAA,MAAM,EAAE;AALH,GALwB;AAY/BC,EAAAA,IAAI,EAAE;AACJC,IAAAA,WAAW,EAAE,WADT;AAEJC,IAAAA,WAAW,EAAE,CAFT;AAGJC,IAAAA,YAAY,EAAE,EAHV;AAIJC,IAAAA,SAAS,EAAE,EAJP;AAKJC,IAAAA,UAAU,EAAE,EALR;AAMJC,IAAAA,WAAW,EAAE,EANT;AAOJC,IAAAA,YAAY,EAAE,EAPV;AAQJC,IAAAA,OAAO,EAAE,CARL;AASJV,IAAAA,KAAK,EAAE,MATH;AAUJH,IAAAA,QAAQ,EAAE;AAVN,GAZyB;AAwB/Bc,EAAAA,KAAK,EAAE;AACLX,IAAAA,KAAK,EAAE;AADF,GAxBwB;AA2B/BY,EAAAA,SAAS,EAAE;AACTC,IAAAA,MAAM,EAAE;AADC,GA3BoB;AA8B/BC,EAAAA,KAAK,EAAE;AACLd,IAAAA,KAAK,EAAE,MADF;AAELM,IAAAA,SAAS,EAAE,CAFN;AAGLC,IAAAA,UAAU,EAAE,EAHP;AAILC,IAAAA,WAAW,EAAE,EAJR;AAKLC,IAAAA,YAAY,EAAE;AALT,GA9BwB;AAqC/BM,EAAAA,SAAS,EAAE;AACTf,IAAAA,KAAK,EAAE,MADE;AAETH,IAAAA,QAAQ,EAAE;AAFD,GArCoB;AAyC/BmB,EAAAA,KAAK,EAAE;AACLrB,IAAAA,eAAe,EAAE,SADZ;AAELW,IAAAA,SAAS,EAAE,EAFN;AAGLC,IAAAA,UAAU,EAAE,EAHP;AAILC,IAAAA,WAAW,EAAE,EAJR;AAKLH,IAAAA,YAAY,EAAE,CALT;AAMLQ,IAAAA,MAAM,EAAE;AANH;AAzCwB,CAAlB,CAAf","sourcesContent":["import React from 'react';\nimport { RefreshControl, Pressable, StatusBar, SafeAreaView, ActivityIndicator, ScrollView, StyleSheet, Text, TextInput, View, Image  } from 'react-native';\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\n\nfunction Gare_1 ({ route, navigation }){\n  const { stop } = route.params;\n\n  return (  <Gare_Home\n              stop = {stop}\n            />\n          );\n}\n  \nclass Gare_Home extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            uic_code: this.props.stop,\n            trains: [],\n            stop: this.props.stop,\n\n            error: '',\n            error_message: '',\n            code: 0,\n        };\n    this.getTrains();\n\t}\n\t\n\tgetTrains() {\n        let stop = this.state.stop;\n        // let type = this.props.type;\n        let type = 'departure';\n        let url = 'https://api.mylines.fr/sncf/' + type + '?stop=' + stop + '&count=10';\n            \n        fetch(url, {\n            method: 'get'\n        })\n        .then((response) => response.json().then(res => ({status: response.status, data: res})))\n        .then((apiResponse) => {\n            console.log(apiResponse)\n            this.setState({\n                code: apiResponse,\n            });\n        })\n        .then(data => {\n            this.setState({\n                trains: data.trains\n            });\n        })\n        .catch((error) => {\n            this.setState({\n                error: url,\n                error_message: error.message,\n            });\n        });\n\t}\n\n\trender(){\n      let gare = '';\n      if (typeof this.state.trains !== 'undefined' && typeof this.state.trains[0] !== 'undefined' )\n        gare = this.state.trains[0].informations.stop_point;\n\n      if (this.state.error != 0 || this.state.error != ''){\n        return (\n            <Text>Something wrong - {this.state.error} - {this.state.error_message}</Text>\n        );\n      }\n      if (!this.state.trains){\n        return (\n          <View style={styles.container}>\n            <Text>Pas content</Text>\n          </View>\n        );\n      } else if (this.state.trains.length == 0){\n        return (\n          <View style={styles.container}>\n            <ActivityIndicator size=\"large\" color=\"#0064aab7\" />\n          </View>\n        );\n      } else {\n        return (\n            <>\n                <View>\n                    <View className=\"gui-mobile head-mobile\">\n                        <Pressable>\n                        </Pressable>\n                        <Text> {gare} </Text>\n                    </View>\n                    <View className=\"mobile-global\">\n                        {this.state.trains.map((train, i) => (\n                            <View onClick={() => this.showDetails(i)}>\n                                <Train \n                                key = {i} \n                                train = {train}\n                                number = {i}\n                                showInfo = {this.state.showInfo}\n                                type = {this.props.type}/>\n                            </View>\n                        ))}\n                    </View>\n                </View>               \n            </>\n        );\n}\n\t}\n}\nclass Train extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { width: window.innerWidth };\n\n        this.handleResize = this.handleResize.bind(this);\n    }\n    \n    handleResize(e){\n        this.setState({ width: window.innerWidth });\n    };\n    \n    componentDidMount() {\n        window.addEventListener(\"resize\", this.handleResize);\n    }\n    \n    componentWillUnmount () {\n        window.addEventListener(\"resize\", this.handleResize);\n    } \n\n\trender(){\n        if (typeof this.props.train === 'undefined') {\n            return (\n                <>\n                </>\n            );\n        }\n\n        let head;\n        if (this.props.type == 'departure')\n            head = this.props.train.informations.direction.name;\n        else\n            head = this.props.train.informations.origin.name;\n\n        let network = this.props.train.informations.network;\n        let code = this.props.train.informations.code;\n        let name = this.props.train.informations.trip_name;\n\n        let real_time;\n        let base_time;\n        let created_base_time;\n        \n        if (this.props.type == 'departure'){\n            if (typeof this.props.train.stop_date_time.base_departure_date_time !== 'undefined') {\n                created_base_time = createDate(this.props.train.stop_date_time.base_departure_date_time);\n                base_time = this.props.train.stop_date_time.base_departure_date_time;\n            } else {\n                created_base_time = createDate(this.props.train.stop_date_time.departure_date_time);\n                base_time = this.props.train.stop_date_time.departure_date_time;\n            }\n            real_time = this.props.train.stop_date_time.departure_date_time;\n        } else {\n            if (typeof this.props.train.stop_date_time.base_arrival_date_time !== 'undefined') {\n                created_base_time = createDate(this.props.train.stop_date_time.base_arrival_date_time);\n                base_time = this.props.train.stop_date_time.base_arrival_date_time;\n            } else {\n                created_base_time = createDate(this.props.train.stop_date_time.arrival_date_time);\n                base_time = this.props.train.stop_date_time.arrival_date_time;\n            }\n            real_time = this.props.train.stop_date_time.arrival_date_time;\n        }\n\n        let status = this.props.train.informations.status;\n        let message = this.props.train.informations.message;\n\n        return (\n            <>\n                <table>\n                    <tbody>\n                        <tr>\n                            <td className=\"dest\">\n                                <img src={'https://mylines.fr/embed.php?serv=' + network} className='img' alt=\"Logo service\"/>\n                                {head}\n                            </td>\n                            <td className=\"time\" rowSpan={2}>\n                                <span>{(created_base_time.getHours() < 10) ? '0' + created_base_time.getHours() : created_base_time.getHours()}:{(created_base_time.getMinutes() < 10) ? '0' + created_base_time.getMinutes() : created_base_time.getMinutes()}</span>\n                                    <br />\n                                <Info real_time={real_time} base_time={base_time} status={status} message={message}/>\n                            </td>\n                            \n                        </tr>\n                        <tr className='train'>\n                            <td className=\"trafic\"> {code == name ? <>{code}</> : <>{code} - {name}</>} </td>\n                        </tr>\n                    </tbody>\n                </table>\n\t\t\t\t\n                <div className='hr'></div>\n\t\t\t</>\n            \n        );\n\t}\n}\n\nclass Info extends React.Component {\n\trender(){\n\n        let real_time = this.props.real_time;\n        let base_time = this.props.base_time;\n        let status = this.props.status;\n        let message = this.props.message;\n\n        if (status == 'deleted')\n            return ( <span className=\"deleted\"> supprimé </span> );\n\n        if (status == 'late')\n            return ( <span className=\"late\"> retardé </span> );\n\n        if (status == 'real_time')\n            return ( <span className=\"late\"> temps réel </span> );\n        \n        if (message == 'idf')\n            return ( <span className=\"info\"> théorique </span> );\n\n        real_time = createDate(real_time);\n        base_time = createDate(base_time);\n        \n        \n        if (real_time < base_time) {\n            real_time.setDate(real_time.getDate());\n        }\n        \n        var diff = real_time - base_time;\n        var msec = diff;\n        var hh = Math.floor(msec / 1000 / 60 / 60);\n        msec -= hh * 1000 * 60 * 60;\n        var mm = Math.floor(msec / 1000 / 60);\n        msec -= mm * 1000 * 60;\n\n        if (mm > 0){\n            if (message == 'idf_realtime'){\n                if (hh == 0 && mm <= 5)\n                    return ( <span className=\"info\"> + {mm} min </span> );\n                else if (hh == 0)\n                    return ( <span className=\"late\"> + {mm} min </span> );\n                else \n                    return ( <span className=\"late\"> + {hh}h{mm} </span> );\n            } else {\n                if (hh == 0)\n                    return ( <span className=\"late\"> retard : {mm} min </span> );\n                else \n                    return ( <span className=\"late\"> retard : {hh}h{mm} </span> );\n            }\n        } else if (typeof this.props.displayAll !== 'undefined')\n            return ( <span className=\"info\"> à l'heure </span> );\n        else\n            return ( <></> );\n\t}   \n}\nfunction createDate(date){\n    let el = new Date(date.substring(0, 4), date.substring(4, 6), date.substring(6, 8), date.substring(9, 11), date.substring(11, 13), 0, 0); \n    return el;\n}\n\nexport default Gare_1;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020',\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23,\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n  },\n  input: {\n    color: '#fff',\n  },\n  loadSpace: {\n    height: 3,\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5,\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20,\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2,\n  }\n});\n"]},"metadata":{},"sourceType":"module"}