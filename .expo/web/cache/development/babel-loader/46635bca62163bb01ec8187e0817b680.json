{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Gare = function (_React$Component) {\n  _inherits(Gare, _React$Component);\n\n  var _super = _createSuper(Gare);\n\n  function Gare(props) {\n    var _this;\n\n    _classCallCheck(this, Gare);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      query: '',\n      stops: [],\n      onload: false\n    };\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n\n    _this.getStops();\n\n    return _this;\n  }\n\n  _createClass(Gare, [{\n    key: \"onChangeText\",\n    value: function onChangeText(e) {\n      this.setState({\n        query: e,\n        onload: true\n      });\n      this.getStops();\n    }\n  }, {\n    key: \"getStops\",\n    value: function getStops() {\n      var _this2 = this;\n\n      var query = this.state.query;\n      var url = 'https://api.mylines.fr/sncf/search?q=' + query;\n      fetch(url, {\n        method: 'get'\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.setState({\n          stops: data.stop_points,\n          onload: false\n        });\n      }).catch(function (err) {\n        _this2.setState({\n          onload: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsx(SafeAreaView, {\n        style: styles.container,\n        children: _jsxs(View, {\n          children: [_jsx(View, {\n            style: styles.form,\n            children: _jsx(TextInput, {\n              style: styles.input,\n              onChangeText: this.onChangeText,\n              value: this.state.query,\n              autoFocus: true,\n              placeholder: \"Rechercher une gare\",\n              placeholderTextColor: \"#ccc\"\n            })\n          }), _jsx(_Fragment, {\n            children: _jsx(Search, {\n              onload: this.state.onload,\n              stops: this.state.stops,\n              query: this.state.query\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return Gare;\n}(React.Component);\n\nvar Search = function (_React$Component2) {\n  _inherits(Search, _React$Component2);\n\n  var _super2 = _createSuper(Search);\n\n  function Search() {\n    _classCallCheck(this, Search);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _jsxs(View, {\n        children: [this.props.onload ? _jsx(ProgressBar, {\n          progress: 0.5,\n          color: \"#0064aab7\"\n        }) : _jsx(View, {\n          style: styles.loadSpace\n        }), _jsxs(ScrollView, {\n          children: [this.props.stops.map(function (stop, i) {\n            return _jsx(Stop, {\n              stop: stop,\n              last: _this3.props.stops.length - 1 == i ? false : true\n            }, i);\n          }), this.props.stops.length == 0 && this.props.query != '' ? _jsx(Text, {\n            children: \"Aucun r\\xE9sultat\"\n          }) : _jsx(_Fragment, {})]\n        })]\n      });\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nfunction Stop(_ref) {\n  var stop = _ref.stop,\n      last = _ref.last;\n  var name = stop.stop_point.name;\n  var id = stop.stop_point.uic_code;\n  var navigation = useNavigation();\n  var route = '';\n  return _jsxs(Pressable, {\n    onPress: function onPress() {\n      navigation.navigate('Gare_1', {\n        stop: id\n      });\n    },\n    style: styles.tiles,\n    children: [_jsxs(Text, {\n      style: styles.tilesText,\n      children: [\" \", name, \" \"]\n    }), last ? _jsx(View, {\n      style: styles.space\n    }) : _jsx(_Fragment, {})]\n  });\n}\n\nexport default Gare;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020'\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20\n  },\n  input: {\n    color: '#fff'\n  },\n  loadSpace: {\n    height: 3\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2\n  }\n});","map":{"version":3,"sources":["/home/code/app/gare.js"],"names":["React","useRoute","useNavigation","NavigationContainer","ProgressBar","Colors","Gare","props","state","query","stops","onload","onChangeText","bind","getStops","e","setState","url","fetch","method","then","res","json","data","stop_points","catch","err","styles","container","form","input","Component","Search","loadSpace","map","stop","i","length","Stop","last","name","stop_point","id","uic_code","navigation","route","navigate","tiles","tilesText","space","StyleSheet","create","flex","backgroundColor","title","fontSize","textAlign","fontWeight","color","margin","borderColor","borderWidth","borderRadius","marginTop","marginLeft","marginRight","marginBottom","padding","height"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;;;;;;;AAEA,SAASC,QAAT,EAAmBC,aAAnB,EAAkCC,mBAAlC,QAA6D,0BAA7D;AACA,SAASC,WAAT,EAAsBC,MAAtB,QAAoC,oBAApC;;;;;IAEMC,I;;;;;AACJ,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACnB,8BAAMA,KAAN;AACE,UAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAG,EADC;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,MAAM,EAAE;AAHC,KAAb;AAKA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;;AACA,UAAKC,QAAL;;AARiB;AASnB;;;;WAEA,sBAAaC,CAAb,EAAe;AACb,WAAKC,QAAL,CAAc;AACZP,QAAAA,KAAK,EAAEM,CADK;AAEZJ,QAAAA,MAAM,EAAE;AAFI,OAAd;AAIA,WAAKG,QAAL;AACD;;;WAED,oBAAW;AAAA;;AACT,UAAML,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAzB;AACF,UAAIQ,GAAG,GAAG,0CAA0CR,KAApD;AAEAS,MAAAA,KAAK,CAACD,GAAD,EAAM;AACVE,QAAAA,MAAM,EAAE;AADE,OAAN,CAAL,CAGCC,IAHD,CAGM,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAHT,EAICF,IAJD,CAIM,UAAAG,IAAI,EAAI;AACb,QAAA,MAAI,CAACP,QAAL,CAAc;AACbN,UAAAA,KAAK,EAAEa,IAAI,CAACC,WADC;AAEbb,UAAAA,MAAM,EAAE;AAFK,SAAd;AAIA,OATD,EAUCc,KAVD,CAUO,UAAAC,GAAG,EAAI;AACb,QAAA,MAAI,CAACV,QAAL,CAAc;AAAEL,UAAAA,MAAM,EAAE;AAAV,SAAd;AACA,OAZD;AAaA;;;WAED,kBAAQ;AACP,aACI,KAAC,YAAD;AAAe,QAAA,KAAK,EAAEgB,MAAM,CAACC,SAA7B;AAAA,kBACI,MAAC,IAAD;AAAA,qBAEE,KAAC,IAAD;AAAM,YAAA,KAAK,EAAED,MAAM,CAACE,IAApB;AAAA,sBACE,KAAC,SAAD;AACE,cAAA,KAAK,EAAEF,MAAM,CAACG,KADhB;AAEE,cAAA,YAAY,EAAE,KAAKlB,YAFrB;AAGE,cAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWC,KAHpB;AAIE,cAAA,SAAS,EAAI,IAJf;AAME,cAAA,WAAW,EAAG,qBANhB;AAOE,cAAA,oBAAoB,EAAG;AAPzB;AADF,YAFF,EAcE;AAAA,sBACE,KAAC,MAAD;AACE,cAAA,MAAM,EAAI,KAAKD,KAAL,CAAWG,MADvB;AAEE,cAAA,KAAK,EAAI,KAAKH,KAAL,CAAWE,KAFtB;AAGE,cAAA,KAAK,EAAI,KAAKF,KAAL,CAAWC;AAHtB;AADF,YAdF;AAAA;AADJ,QADJ;AA2BC;;;;EAnEgBT,KAAK,CAAC+B,S;;IAsEnBC,M;;;;;;;;;;;;;WACL,kBAAQ;AAAA;;AACP,aACC,MAAC,IAAD;AAAA,mBACE,KAAKzB,KAAL,CAAWI,MAAX,GAAoB,KAAC,WAAD;AAAa,UAAA,QAAQ,EAAE,GAAvB;AAA4B,UAAA,KAAK,EAAC;AAAlC,UAApB,GAAuE,KAAC,IAAD;AAAM,UAAA,KAAK,EAAEgB,MAAM,CAACM;AAApB,UADzE,EAEE,MAAC,UAAD;AAAA,qBAEE,KAAK1B,KAAL,CAAWG,KAAX,CAAiBwB,GAAjB,CAAqB,UAACC,IAAD,EAAOC,CAAP;AAAA,mBACrB,KAAC,IAAD;AAEC,cAAA,IAAI,EAAID,IAFT;AAGS,cAAA,IAAI,EAAI,MAAI,CAAC5B,KAAL,CAAWG,KAAX,CAAiB2B,MAAjB,GAAyB,CAAzB,IAA8BD,CAA9B,GAAkC,KAAlC,GAA0C;AAH3D,eACQA,CADR,CADqB;AAAA,WAArB,CAFF,EASE,KAAK7B,KAAL,CAAWG,KAAX,CAAiB2B,MAAjB,IAA2B,CAA3B,IAAgC,KAAK9B,KAAL,CAAWE,KAAX,IAAoB,EAApD,GAAyD,KAAC,IAAD;AAAA;AAAA,YAAzD,GAAuF,mBATzF;AAAA,UAFF;AAAA,QADD;AAiBA;;;;EAnBmBT,KAAK,CAAC+B,S;;AAsB3B,SAASO,IAAT,OAA6B;AAAA,MAAbH,IAAa,QAAbA,IAAa;AAAA,MAAPI,IAAO,QAAPA,IAAO;AAC3B,MAAIC,IAAI,GAAGL,IAAI,CAACM,UAAL,CAAgBD,IAA3B;AACA,MAAIE,EAAE,GAAGP,IAAI,CAACM,UAAL,CAAgBE,QAAzB;AAEA,MAAMC,UAAU,GAAG1C,aAAa,EAAhC;AACA,MAAM2C,KAAK,GAAG,EAAd;AAEA,SACE,MAAC,SAAD;AAAW,IAAA,OAAO,EAAE,mBAAM;AAACD,MAAAA,UAAU,CAACE,QAAX,CAAoB,QAApB,EAA8B;AAACX,QAAAA,IAAI,EAAEO;AAAP,OAA9B;AAA6C,KAAxE;AAA0E,IAAA,KAAK,EAAEf,MAAM,CAACoB,KAAxF;AAAA,eAEE,MAAC,IAAD;AAAM,MAAA,KAAK,EAAEpB,MAAM,CAACqB,SAApB;AAAA,sBAAiCR,IAAjC;AAAA,MAFF,EAGGD,IAAI,GAAG,KAAC,IAAD;AAAM,MAAA,KAAK,EAAEZ,MAAM,CAACsB;AAApB,MAAH,GAAwC,mBAH/C;AAAA,IADF;AAQD;;AAGD,eAAe3C,IAAf;AAEA,IAAMqB,MAAM,GAAGuB,UAAU,CAACC,MAAX,CAAkB;AAC/BvB,EAAAA,SAAS,EAAE;AACTwB,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,eAAe,EAAE;AAFR,GADoB;AAK/BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE,EADL;AAELC,IAAAA,SAAS,EAAE,MAFN;AAGLC,IAAAA,UAAU,EAAE,MAHP;AAILC,IAAAA,KAAK,EAAE,MAJF;AAKLC,IAAAA,MAAM,EAAE;AALH,GALwB;AAY/B9B,EAAAA,IAAI,EAAE;AACJ+B,IAAAA,WAAW,EAAE,WADT;AAEJC,IAAAA,WAAW,EAAE,CAFT;AAGJC,IAAAA,YAAY,EAAE,EAHV;AAIJC,IAAAA,SAAS,EAAE,EAJP;AAKJC,IAAAA,UAAU,EAAE,EALR;AAMJC,IAAAA,WAAW,EAAE,EANT;AAOJC,IAAAA,YAAY,EAAE,EAPV;AAQJC,IAAAA,OAAO,EAAE,CARL;AASJT,IAAAA,KAAK,EAAE,MATH;AAUJH,IAAAA,QAAQ,EAAE;AAVN,GAZyB;AAwB/BzB,EAAAA,KAAK,EAAE;AACL4B,IAAAA,KAAK,EAAE;AADF,GAxBwB;AA2B/BzB,EAAAA,SAAS,EAAE;AACTmC,IAAAA,MAAM,EAAE;AADC,GA3BoB;AA8B/BrB,EAAAA,KAAK,EAAE;AACLW,IAAAA,KAAK,EAAE,MADF;AAELK,IAAAA,SAAS,EAAE,CAFN;AAGLC,IAAAA,UAAU,EAAE,EAHP;AAILC,IAAAA,WAAW,EAAE,EAJR;AAKLC,IAAAA,YAAY,EAAE;AALT,GA9BwB;AAqC/BlB,EAAAA,SAAS,EAAE;AACTU,IAAAA,KAAK,EAAE,MADE;AAETH,IAAAA,QAAQ,EAAE;AAFD,GArCoB;AAyC/BN,EAAAA,KAAK,EAAE;AACLI,IAAAA,eAAe,EAAE,SADZ;AAELU,IAAAA,SAAS,EAAE,EAFN;AAGLC,IAAAA,UAAU,EAAE,EAHP;AAILC,IAAAA,WAAW,EAAE,EAJR;AAKLH,IAAAA,YAAY,EAAE,CALT;AAMLM,IAAAA,MAAM,EAAE;AANH;AAzCwB,CAAlB,CAAf","sourcesContent":["import React from 'react';\nimport { RefreshControl, Pressable, StatusBar, SafeAreaView, ScrollView, StyleSheet, Text, TextInput, View, Image  } from 'react-native';\nimport { useRoute, useNavigation, NavigationContainer } from '@react-navigation/native';\nimport { ProgressBar, Colors } from 'react-native-paper';\n  \nclass Gare extends React.Component  {\n  constructor(props) {\n\t\tsuper(props);\n    this.state = {\n        query : '',\n        stops: [],\n        onload: false,\n    }\n    this.onChangeText = this.onChangeText.bind(this);\n    this.getStops();\n\t}\n\n  onChangeText(e){\n    this.setState({\n      query: e,\n      onload: true\n    })\n    this.getStops();\n  }\n\n  getStops() {\n    const query = this.state.query;\n\t\tlet url = 'https://api.mylines.fr/sncf/search?q=' + query;\n\t\t\n\t\tfetch(url, {\n\t\t\tmethod: 'get'\n\t\t})\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tstops: data.stop_points,\n\t\t\t\tonload: false\n\t\t\t});\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.setState({ onload: false });\n\t\t});\n\t}\n  \n\trender(){\n\t\treturn (\n      <SafeAreaView  style={styles.container}>          \n          <View>  \n            {/*<Text style={styles.title}>Rechercher une gare</Text>*/}\n            <View style={styles.form}>\n              <TextInput\n                style={styles.input}\n                onChangeText={this.onChangeText}\n                value={this.state.query}\n                autoFocus = {true}\n\n                placeholder = 'Rechercher une gare'\n                placeholderTextColor = '#ccc'\n              />\n            </View> \n\n            <>\n              <Search\n                onload = {this.state.onload}\n                stops = {this.state.stops}\n                query = {this.state.query}\n              ></Search>   \n            </> \n            \n          </View>\n      </SafeAreaView >\n    );\n  }\n}\n\nclass Search extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<View>\n\t\t\t\t{this.props.onload ? <ProgressBar progress={0.5} color='#0064aab7' /> : <View style={styles.loadSpace}></View>}\n\t\t\t\t\t<ScrollView> \n\t\t\t\t   \n\t\t\t\t\t\t{this.props.stops.map((stop, i) => (\n\t\t\t\t\t\t\t<Stop \n\t\t\t\t\t\t\t\tkey = {i}\n\t\t\t\t\t\t\t\tstop = {stop}\n                last = {this.props.stops.length -1 == i ? false : true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{this.props.stops.length == 0 && this.props.query != '' ? <Text>Aucun résultat</Text> : <></>}\n\n\t\t\t\t\t</ScrollView>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nfunction Stop ({stop, last}) {\n  let name = stop.stop_point.name;\n  let id = stop.stop_point.uic_code;\n\n  const navigation = useNavigation();\n  const route = '';\n\n  return (\n    <Pressable onPress={() => {navigation.navigate('Gare_1', {stop: id }); }} style={styles.tiles}>\n\n      <Text style={styles.tilesText}> {name} </Text>\n      {last ? <View style={styles.space}></View> : <></>}\n      \n    </Pressable>\n  );\n}\n\n\nexport default Gare;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#202020',\n  },\n  title: {\n    fontSize: 30,\n    textAlign: 'left',\n    fontWeight: 'bold',\n    color: '#fff',\n    margin: 23,\n  },\n  form: {\n    borderColor: '#0064aab7',\n    borderWidth: 2,\n    borderRadius: 10,\n    marginTop: 15,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    padding: 5,\n    color: '#fff',\n    fontSize: 20,\n  },\n  input: {\n    color: '#fff',\n  },\n  loadSpace: {\n    height: 3,\n  },\n  tiles: {\n    color: '#fff',\n    marginTop: 5,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 5,\n  },\n  tilesText: {\n    color: '#fff',\n    fontSize: 20,\n  },\n  space: {\n    backgroundColor: '#868686',\n    marginTop: 15,\n    marginLeft: 10,\n    marginRight: 10,\n    borderRadius: 2,\n    height: 2,\n  }\n});\n"]},"metadata":{},"sourceType":"module"}